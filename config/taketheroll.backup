--
-- PostgreSQL database dump
--

-- Dumped from database version 9.5.2
-- Dumped by pg_dump version 9.5.2

-- Started on 2016-05-09 20:39:23 CEST

SET statement_timeout = 0;
SET lock_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SET check_function_bodies = false;
SET client_min_messages = warning;
SET row_security = off;

--
-- TOC entry 1 (class 3079 OID 12395)
-- Name: plpgsql; Type: EXTENSION; Schema: -; Owner: 
--

CREATE EXTENSION IF NOT EXISTS plpgsql WITH SCHEMA pg_catalog;


--
-- TOC entry 2216 (class 0 OID 0)
-- Dependencies: 1
-- Name: EXTENSION plpgsql; Type: COMMENT; Schema: -; Owner: 
--

COMMENT ON EXTENSION plpgsql IS 'PL/pgSQL procedural language';


SET search_path = public, pg_catalog;

SET default_tablespace = '';

SET default_with_oids = false;

--
-- TOC entry 190 (class 1259 OID 16474)
-- Name: absence; Type: TABLE; Schema: public; Owner: kash
--

CREATE TABLE absence (
    "id_Absence" integer NOT NULL,
    "bool_Justify" boolean DEFAULT false NOT NULL,
    "id_Course" integer NOT NULL
);


ALTER TABLE absence OWNER TO kash;

--
-- TOC entry 186 (class 1259 OID 16432)
-- Name: administrator; Type: TABLE; Schema: public; Owner: kash
--

CREATE TABLE administrator (
    "id_Administrator" integer NOT NULL,
    name text NOT NULL,
    nickname text NOT NULL,
    email text NOT NULL,
    "id_User" integer NOT NULL
);


ALTER TABLE administrator OWNER TO kash;

--
-- TOC entry 185 (class 1259 OID 16430)
-- Name: administrator_id_Administrator_seq; Type: SEQUENCE; Schema: public; Owner: kash
--

CREATE SEQUENCE "administrator_id_Administrator_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE "administrator_id_Administrator_seq" OWNER TO kash;

--
-- TOC entry 2217 (class 0 OID 0)
-- Dependencies: 185
-- Name: administrator_id_Administrator_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: kash
--

ALTER SEQUENCE "administrator_id_Administrator_seq" OWNED BY administrator."id_Administrator";


--
-- TOC entry 188 (class 1259 OID 16451)
-- Name: course; Type: TABLE; Schema: public; Owner: kash
--

CREATE TABLE course (
    "id_Course" integer NOT NULL,
    entitled text NOT NULL,
    "date_Course" date NOT NULL,
    "start_TIme" time without time zone NOT NULL,
    "end_Time" time without time zone NOT NULL,
    "bool_Roll" boolean DEFAULT false NOT NULL,
    "id_Teacher" integer NOT NULL,
    "id_Student" integer NOT NULL
);


ALTER TABLE course OWNER TO kash;

--
-- TOC entry 189 (class 1259 OID 16468)
-- Name: late; Type: TABLE; Schema: public; Owner: kash
--

CREATE TABLE late (
    "id_Late" integer NOT NULL,
    "bool_Justify" boolean DEFAULT false NOT NULL,
    "id_Student" integer NOT NULL,
    "id_Course" integer NOT NULL
);


ALTER TABLE late OWNER TO kash;

--
-- TOC entry 182 (class 1259 OID 16408)
-- Name: student; Type: TABLE; Schema: public; Owner: kash
--

CREATE TABLE student (
    "Id_Student" integer NOT NULL,
    name text COLLATE pg_catalog."fr_FR.utf8" NOT NULL,
    nickname text COLLATE pg_catalog."fr_FR.utf8" NOT NULL,
    sex text NOT NULL,
    "numTel" text,
    email text NOT NULL,
    address text NOT NULL,
    birthday date NOT NULL,
    "group" integer NOT NULL,
    "id_User" integer NOT NULL,
    CONSTRAINT cc_group CHECK (("group" = ANY (ARRAY[1, 2]))),
    CONSTRAINT cc_sex CHECK ((sex = ANY (ARRAY['homme'::text, 'femme'::text])))
);


ALTER TABLE student OWNER TO kash;

--
-- TOC entry 181 (class 1259 OID 16406)
-- Name: student_Id_Student_seq; Type: SEQUENCE; Schema: public; Owner: kash
--

CREATE SEQUENCE "student_Id_Student_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE "student_Id_Student_seq" OWNER TO kash;

--
-- TOC entry 2218 (class 0 OID 0)
-- Dependencies: 181
-- Name: student_Id_Student_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: kash
--

ALTER SEQUENCE "student_Id_Student_seq" OWNED BY student."Id_Student";


--
-- TOC entry 184 (class 1259 OID 16421)
-- Name: teacher; Type: TABLE; Schema: public; Owner: kash
--

CREATE TABLE teacher (
    "id_Teacher" integer NOT NULL,
    name text NOT NULL,
    nickname text NOT NULL,
    email text NOT NULL,
    "id_User" integer NOT NULL
);


ALTER TABLE teacher OWNER TO kash;

--
-- TOC entry 183 (class 1259 OID 16419)
-- Name: teacher_id_Teacher_seq; Type: SEQUENCE; Schema: public; Owner: kash
--

CREATE SEQUENCE "teacher_id_Teacher_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE "teacher_id_Teacher_seq" OWNER TO kash;

--
-- TOC entry 2219 (class 0 OID 0)
-- Dependencies: 183
-- Name: teacher_id_Teacher_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: kash
--

ALTER SEQUENCE "teacher_id_Teacher_seq" OWNED BY teacher."id_Teacher";


--
-- TOC entry 187 (class 1259 OID 16441)
-- Name: user; Type: TABLE; Schema: public; Owner: kash
--

CREATE TABLE "user" (
    username text NOT NULL,
    password text NOT NULL,
    "id_User" integer NOT NULL,
    role text NOT NULL,
    CONSTRAINT cc_role CHECK ((role = ANY (ARRAY['student'::text, 'teacher'::text, 'administrator'::text])))
);


ALTER TABLE "user" OWNER TO kash;

--
-- TOC entry 2220 (class 0 OID 0)
-- Dependencies: 187
-- Name: COLUMN "user".username; Type: COMMENT; Schema: public; Owner: kash
--

COMMENT ON COLUMN "user".username IS 'Username is email adress of Student, Admin and Teacher';


--
-- TOC entry 2054 (class 2604 OID 16435)
-- Name: id_Administrator; Type: DEFAULT; Schema: public; Owner: kash
--

ALTER TABLE ONLY administrator ALTER COLUMN "id_Administrator" SET DEFAULT nextval('"administrator_id_Administrator_seq"'::regclass);


--
-- TOC entry 2208 (class 0 OID 16474)
-- Dependencies: 190
-- Data for Name: absence; Type: TABLE DATA; Schema: public; Owner: kash
--

COPY absence ("id_Absence", "bool_Justify", "id_Course") FROM stdin;
\.


--
-- TOC entry 2204 (class 0 OID 16432)
-- Dependencies: 186
-- Data for Name: administrator; Type: TABLE DATA; Schema: public; Owner: kash
--

COPY administrator ("id_Administrator", name, nickname, email, "id_User") FROM stdin;
\.


--
-- TOC entry 2221 (class 0 OID 0)
-- Dependencies: 185
-- Name: administrator_id_Administrator_seq; Type: SEQUENCE SET; Schema: public; Owner: kash
--

SELECT pg_catalog.setval('"administrator_id_Administrator_seq"', 1, false);


--
-- TOC entry 2206 (class 0 OID 16451)
-- Dependencies: 188
-- Data for Name: course; Type: TABLE DATA; Schema: public; Owner: kash
--

COPY course ("id_Course", entitled, "date_Course", "start_TIme", "end_Time", "bool_Roll", "id_Teacher", "id_Student") FROM stdin;
\.


--
-- TOC entry 2207 (class 0 OID 16468)
-- Dependencies: 189
-- Data for Name: late; Type: TABLE DATA; Schema: public; Owner: kash
--

COPY late ("id_Late", "bool_Justify", "id_Student", "id_Course") FROM stdin;
\.


--
-- TOC entry 2200 (class 0 OID 16408)
-- Dependencies: 182
-- Data for Name: student; Type: TABLE DATA; Schema: public; Owner: kash
--

COPY student ("Id_Student", name, nickname, sex, "numTel", email, address, birthday, "group", "id_User") FROM stdin;
\.


--
-- TOC entry 2222 (class 0 OID 0)
-- Dependencies: 181
-- Name: student_Id_Student_seq; Type: SEQUENCE SET; Schema: public; Owner: kash
--

SELECT pg_catalog.setval('"student_Id_Student_seq"', 1, false);


--
-- TOC entry 2202 (class 0 OID 16421)
-- Dependencies: 184
-- Data for Name: teacher; Type: TABLE DATA; Schema: public; Owner: kash
--

COPY teacher ("id_Teacher", name, nickname, email, "id_User") FROM stdin;
\.


--
-- TOC entry 2223 (class 0 OID 0)
-- Dependencies: 183
-- Name: teacher_id_Teacher_seq; Type: SEQUENCE SET; Schema: public; Owner: kash
--

SELECT pg_catalog.setval('"teacher_id_Teacher_seq"', 1, false);


--
-- TOC entry 2205 (class 0 OID 16441)
-- Dependencies: 187
-- Data for Name: user; Type: TABLE DATA; Schema: public; Owner: kash
--

COPY "user" (username, password, "id_User", role) FROM stdin;
\.


--
-- TOC entry 2060 (class 2606 OID 16418)
-- Name: Cu_email; Type: CONSTRAINT; Schema: public; Owner: kash
--

ALTER TABLE ONLY student
    ADD CONSTRAINT "Cu_email" UNIQUE (email);


--
-- TOC entry 2068 (class 2606 OID 16450)
-- Name: Cu_username; Type: CONSTRAINT; Schema: public; Owner: kash
--

ALTER TABLE ONLY "user"
    ADD CONSTRAINT "Cu_username" UNIQUE (username);


--
-- TOC entry 2076 (class 2606 OID 16479)
-- Name: pk_id_Absence; Type: CONSTRAINT; Schema: public; Owner: kash
--

ALTER TABLE ONLY absence
    ADD CONSTRAINT "pk_id_Absence" PRIMARY KEY ("id_Absence");


--
-- TOC entry 2066 (class 2606 OID 16440)
-- Name: pk_id_Administrator; Type: CONSTRAINT; Schema: public; Owner: kash
--

ALTER TABLE ONLY administrator
    ADD CONSTRAINT "pk_id_Administrator" PRIMARY KEY ("id_Administrator");


--
-- TOC entry 2072 (class 2606 OID 16455)
-- Name: pk_id_Course; Type: CONSTRAINT; Schema: public; Owner: kash
--

ALTER TABLE ONLY course
    ADD CONSTRAINT "pk_id_Course" PRIMARY KEY ("id_Course");


--
-- TOC entry 2074 (class 2606 OID 16473)
-- Name: pk_id_Late; Type: CONSTRAINT; Schema: public; Owner: kash
--

ALTER TABLE ONLY late
    ADD CONSTRAINT "pk_id_Late" PRIMARY KEY ("id_Late");


--
-- TOC entry 2062 (class 2606 OID 16416)
-- Name: pk_id_Student; Type: CONSTRAINT; Schema: public; Owner: kash
--

ALTER TABLE ONLY student
    ADD CONSTRAINT "pk_id_Student" PRIMARY KEY ("Id_Student");


--
-- TOC entry 2064 (class 2606 OID 16429)
-- Name: pk_id_Teacher; Type: CONSTRAINT; Schema: public; Owner: kash
--

ALTER TABLE ONLY teacher
    ADD CONSTRAINT "pk_id_Teacher" PRIMARY KEY ("id_Teacher");


--
-- TOC entry 2070 (class 2606 OID 16481)
-- Name: pk_id_User; Type: CONSTRAINT; Schema: public; Owner: kash
--

ALTER TABLE ONLY "user"
    ADD CONSTRAINT "pk_id_User" PRIMARY KEY ("id_User");


--
-- TOC entry 2084 (class 2606 OID 16502)
-- Name: fk_id_Course; Type: FK CONSTRAINT; Schema: public; Owner: kash
--

ALTER TABLE ONLY absence
    ADD CONSTRAINT "fk_id_Course" FOREIGN KEY ("id_Course") REFERENCES course("id_Course") ON DELETE CASCADE;


--
-- TOC entry 2083 (class 2606 OID 16517)
-- Name: fk_id_Course; Type: FK CONSTRAINT; Schema: public; Owner: kash
--

ALTER TABLE ONLY late
    ADD CONSTRAINT "fk_id_Course" FOREIGN KEY ("id_Course") REFERENCES course("id_Course") ON DELETE CASCADE;


--
-- TOC entry 2081 (class 2606 OID 16507)
-- Name: fk_id_Student; Type: FK CONSTRAINT; Schema: public; Owner: kash
--

ALTER TABLE ONLY course
    ADD CONSTRAINT "fk_id_Student" FOREIGN KEY ("id_Student") REFERENCES student("Id_Student") ON DELETE CASCADE;


--
-- TOC entry 2082 (class 2606 OID 16512)
-- Name: fk_id_Student; Type: FK CONSTRAINT; Schema: public; Owner: kash
--

ALTER TABLE ONLY late
    ADD CONSTRAINT "fk_id_Student" FOREIGN KEY ("id_Student") REFERENCES student("Id_Student");


--
-- TOC entry 2080 (class 2606 OID 16497)
-- Name: fk_id_Teacher; Type: FK CONSTRAINT; Schema: public; Owner: kash
--

ALTER TABLE ONLY course
    ADD CONSTRAINT "fk_id_Teacher" FOREIGN KEY ("id_Teacher") REFERENCES teacher("id_Teacher");


--
-- TOC entry 2078 (class 2606 OID 16482)
-- Name: fk_id_User; Type: FK CONSTRAINT; Schema: public; Owner: kash
--

ALTER TABLE ONLY teacher
    ADD CONSTRAINT "fk_id_User" FOREIGN KEY ("id_User") REFERENCES "user"("id_User") ON DELETE CASCADE;


--
-- TOC entry 2077 (class 2606 OID 16487)
-- Name: fk_id_User; Type: FK CONSTRAINT; Schema: public; Owner: kash
--

ALTER TABLE ONLY student
    ADD CONSTRAINT "fk_id_User" FOREIGN KEY ("id_User") REFERENCES "user"("id_User") ON DELETE CASCADE;


--
-- TOC entry 2079 (class 2606 OID 16492)
-- Name: fk_id_User; Type: FK CONSTRAINT; Schema: public; Owner: kash
--

ALTER TABLE ONLY administrator
    ADD CONSTRAINT "fk_id_User" FOREIGN KEY ("id_User") REFERENCES "user"("id_User") ON DELETE CASCADE;


--
-- TOC entry 2215 (class 0 OID 0)
-- Dependencies: 6
-- Name: public; Type: ACL; Schema: -; Owner: postgres
--

REVOKE ALL ON SCHEMA public FROM PUBLIC;
REVOKE ALL ON SCHEMA public FROM postgres;
GRANT ALL ON SCHEMA public TO postgres;
GRANT ALL ON SCHEMA public TO PUBLIC;


-- Completed on 2016-05-09 20:39:23 CEST

--
-- PostgreSQL database dump complete
--

